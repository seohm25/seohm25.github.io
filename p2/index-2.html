<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta namde="viewport" content="width=device-width, initial-scale=1.0">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Bitcount+Prop+Single+Ink:wght@100..900&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Nunito:ital,wght@0,200..1000;1,200..1000&family=Stack+Sans+Notch:wght@200..700&family=Zalando+Sans+Expanded:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet">

<title>Gala porras - Kim</title>
<style>
  body {
    margin:0; padding:0; height:100%; 
    overflow: auto;
    background: transparent;
    font-family: Arial, sans-serif;


  }
  canvas {
    position: fixed;
    top:0;
    left:0;
    z-index:0;
    pointer-events: none; /* canvas 위에서도 스크롤 가능 */
  }


  #textLayer {
    position: relative;
    margin: 30px;
    padding:100px;
    font-size: 50px;
    line-height: 1.3;
    color: rgb(230, 230, 230);
    /* color: black; */
    white-space: pre-wrap;
    max-width: 60%;
    font-family: "Arial", sans-serif;
    z-index: -10;
    font-weight: 200;
  }

  /* #textLayer span {
    display: inline-block;
    position: relative;
    white-space: pre;
  } */

  .title-container {
    position: fixed;
    margin:1%;
    width: 40%;
    top:0px;
    height:auto;
    color:black;
    /* -webkit-text-stroke: 1px black;  */
    font-size: 70px;
    z-index: 1;
    font-family: "Inter", sans-serif;
    font-weight: 900;
    font-variation-settings: "wght" 300;
    animation: weightPulse 6s ease-in-out infinite;

  }

  @keyframes weightPulse {
  0%   { font-variation-settings: "wght" 300; }
  50%  { font-variation-settings: "wght" 700; }
  100% { font-variation-settings: "wght" 300; }
}

  .exhibition-container {
    position: fixed;
    right:5%;
    top:0px;
    color:black;
    -webkit-text-stroke: 1px black; 
    margin:1%;
    width: 50%;
    font-size: 70px;
    align-content: right;
    z-index: 1;
    font-family: "Inter", sans-serif;
    font-weight: 900;
    font-variation-settings: "wght" 300;
    animation: weightPulse 6s ease-in-out infinite;

  }

  @keyframes weightPulse {
  0%   { font-variation-settings: "wght" 300; }
  50%  { font-variation-settings: "wght" 700; }
  100% { font-variation-settings: "wght" 300; }
}
  /* .content {
    position: relative;
    z-index:1;
    padding:50px;
    color:#000;
  } */
    #bgCanvas, #uiCanvas {
    position: fixed;
    top:0; left:0;
    width: 100%; height: 100%;
  }
  #bgCanvas { z-index: 0; }  /* dot layer */
  #uiCanvas { z-index: 1; }  /* 텍스트 위 */

  #visitorCount {
    position: fixed;
    bottom:20px;
    left:20px;
    padding:10px 15px;
    border-radius:8px;
    font-size:30px;
    z-index:10;
    color:white;
    -webkit-text-stroke: 0.8px black; 
    z-index: 10;
    font-family: "Arial", sans-serif;
  }

  img {
    position: fixed;
    width: 30px;
    top:20px;
    right:20px;
    padding:10px 15px;
  }

  .dot-container {
  position: fixed;
  bottom: 100px;
  right: 20px;
  display: flex;
  align-items: center;
  gap: 10px; /* dot과 텍스트 사이 간격 */
  z-index: 20;
}


  .dot {
    position: fixed; 
    bottom: 50px;    
    right: 1px;     
    width: 20px;
    height: 20px;
    margin: 20px;
    background-color: #000000;
    border-radius: 50%;
    cursor: pointer;
    z-index: 20;
  }

  .dot-caption {
    writing-mode: vertical-rl;
  }

  .textbox {
  display: none;
  position: fixed;
  bottom: 100px; /* dot 위쪽 */
  right: 50px;
  z-index: 20;
  padding: 20px 15px;
  background-color: #fff;
  border: 1px solid #000;
  width: 200px;
}


</style>
</head>
<body>
<canvas id="trail"></canvas>
<canvas id="bgCanvas"></canvas> <!-- dot layer -->
<canvas id="uiCanvas"></canvas> <!-- text layer -->

<div id="visitorCount">Dust contributors : 0</div>
<button id="resetButton">Reset Dust</button>


<div class="content">

<a href="about.html"> <img src="black-circle.png"></a>

<div class="title-container">
  <span class="name">GALA PORRAS - KIM</span>
</div>
<div class="exhibition-container">
  <span class="exhibition">UNSEEN FORCE</span><br>
  <span class="date">NOV 1, 2025 – <br> DEC 5, 2025 </span>
</div>

<div id="textLayer">
Gala Porras-Kim 
4727 2nd Avenue 
Los Angeles, CA 90043


New York City, November 20, 2021

Ms. Jane Pickering
William and Muriel Seabury Howells Director
Peabody Museum of Archaeology & Ethnology
Harvard University
11 Divinity Ave, Cambridge, MA 02138
RE: Mediating with the rain

Dear Ms. Pickering,

Thanks very much to you and your staff for being so accommodating and helpful in providing records and information regarding the objects that were dredged from the Sacred Cenote at Chichén Itza currently located in your museum. As I mentioned in our last meeting, I am interested in objects suspended from their original function or purpose by being stored and displayed in institutions solely as historical objects. In this case, these votive offerings were submerged as tributes to the Mayan rain god Chaac, and probably never meant to leave the cenote. It is clear from the documents regarding the provenance of these objects that human laws were used to displace them from their intended place to their current location at the Peabody. Their owner, the rain, is still around.

Some of the objects had been preserved over centuries because they were submerged in water in the cenote. Their current state of dehydration, caused by their extraction and maintenance by conservators, permanently changed their composition so now they are just dust particles held together through conservation methods. The Peabody is, in fact, preserving this dust as a shell of its past shape. Your storage, being one of the driest environments in which they can exist, is in complete opposition to their submerged wet state, and their current condition as historical artifacts might make it difficult to realize their purpose with the rain.

The museum is tasked with caring for the object, but should not be limited only to the physical conservation of material form, by extending this care to the immaterial and the preservation of the ritual function—the dignitary interests—that may still exist within the object. Since we can only speculate on what the rain might want, we can, by extension, consider ways in which we can reinstitute the ritual life they continue to have within them as well.

For this purpose, I would like to thank you for collecting and providing the fallen dust that was available in the storage room, which is now being rehydrated through various means. Of course, there are many ways that these multiple functions can coexist and I’ve attached some initial ideas to brainstorm. I look forward to discussing with you future solutions to this arid landscape.

Thank you again for your attention, consideration, and time, and I await your reply with interest.

Sincerely,

Gala Porras-Kim
</div>

<div class="dot-container">
  <div class="dot"></div>
  <div class="dot-caption">Mediating with the rain, 2021 – ongoing, document.</div>
</div>
<div class="textbox">She sends a letter to the museum director, 
  proposing a preservation method in which the fragments that have fallen off 
  the artifact are gathered and reunited with rainwater, allowing them to be submerged and 
  regain the ritual function they originally served.</div>

</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
// 1️⃣ Firebase 초기화
const firebaseConfig = {
  apiKey: "AIzaSyBo9ctGVcPZSbvzmXoZbHer6EU00sk0q_o",
  authDomain: "galla-d7b16.firebaseapp.com",
  projectId: "galla-d7b16",
  databaseURL: "https://galla-d7b16-default-rtdb.firebaseio.com/",
  storageBucket: "galla-d7b16.firebasestorage.app",
  messagingSenderId: "790986481992",
  appId: "1:790986481992:web:f347763bb72766de1e137d",
  measurementId: "G-VC8DBJRVX1"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// 2️⃣ 방문자 수 처리
const visitorsRef = db.ref("visitors");
const visitorId = Date.now() + "-" + Math.floor(Math.random()*1000000);
visitorsRef.child(visitorId).set(true);
visitorsRef.on("value", snapshot => {
  const count = snapshot.numChildren();
  document.getElementById("visitorCount").innerText = " Dust contributors : " + count + " people";
});
window.addEventListener("beforeunload", () => {
  visitorsRef.child(visitorId).remove();
});

// 3️⃣ 마우스 잔상 먼지 데이터 처리
const dustRef = db.ref("dustDots"); // 점 데이터 저장
const canvas = document.getElementById("trail");
const ctx = canvas.getContext("2d");
function resizeCanvas() { canvas.width=window.innerWidth; canvas.height=window.innerHeight; }
window.addEventListener("resize", resizeCanvas);
resizeCanvas();

// 마우스 이동 시 Firebase에 점 추가
window.addEventListener("mousemove", e => {
  const x = e.clientX;
  const y = e.clientY;
  const r = 1 + Math.random()*2;
  const alpha = 0.4 + Math.random()*0.3;
  dustRef.push({ x, y, r, alpha });
});

// 점 배열
let dustDots = [];

// Firebase에서 모든 점 받아서 그림
dustRef.on("child_added", snapshot => {
  const dot = snapshot.val();
  dustDots.push(dot);
});

// 애니메이션
function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  for(let i = dustDots.length-1; i >=0; i--){
    const dot = dustDots[i];
    ctx.fillStyle = `rgba(0,0,0,${dot.alpha})`;
    ctx.beginPath();
    ctx.arc(dot.x, dot.y, dot.r, 0, Math.PI*2);
    ctx.fill();

    // alpha 점점 감소, 0.07 이하로는 유지
    dot.alpha -= 0.005;
    if(dot.alpha < 0.06) dot.alpha = 0.06;
  }

  requestAnimationFrame(animate);
}
animate();


//caption dot
const dot = document.querySelector('.dot');
const textbox = document.querySelector('.textbox');

dot.addEventListener('click', () => {
  textbox.style.display = textbox.style.display === 'block' ? 'none' : 'block';
});

document.getElementById("resetButton").addEventListener("click", () => {
  firebase.database().ref("dustDots").remove();
  dustDots = []; // 화면에서도 즉시 제거
});

</script>

<!-- p5js -->
<script src="script.js"></script>
</body>
</html>
